{% extends "base.html" %}    
{% block content %}    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="static/script.js"></script>
    <div class="container">
        <h2 class="text-center mb-4">ðŸ“Œ ÐœÐ¾Ð¸ Ð·Ð°Ð´Ð°Ñ‡Ð¸</h2>
        <button class="btn btn-outline-primary new-folder-btn" id="new-folder-btn">âž• Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð½Ð¾Ð²ÑƒÑŽ Ð¿Ð°Ð¿ÐºÑƒ</button>
        <div class="d-flex gap-3 flex-wrap" id="folder-list">
            {% for folder in folders %}
            <div class="folder-column">
                <div class="folder" id="folder{{folder.id}}">
                    <div style="display: flex; align-items: center; justify-content: space-between;">
                        <h5 style="display: inline-block;"> {{folder.name }} </h5>
                        <div class="dropdown">
                            <button class="dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false"></button>
                            <ul class="dropdown-menu">
                              <li><button class="dropdown-item" id="folderDelete{{folder.id}}">Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ</button></li>
                              <li><button class="dropdown-item" id="folderEdit{{folder.id}}">Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ</button></li>
                            </ul>
                        </div>
                    </div>
                    <a href="#" class="add-task" id="button{{folder.id}}">âž• Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð·Ð°Ð´Ð°Ñ‡Ñƒ</a>
                    <ul class="task-list mt-2" id = "task-list{{folder.id}}">
                        {% for task in folder.tasks %}
                            {% if not task.is_completed %}
                            <div style="display: flex; align-items: center; justify-content: space-between;" class="task-item">
                                <li id="task{{task.id}}"><input type="checkbox" id="taskCheckbox{{task.id}}"> {{ task.name }} </li>
                                <button type="button" style="border: none;background: transparent;" data-bs-toggle="dropdown" aria-expanded="false"> : </button>
                                <ul class="dropdown-menu">
                                    <li><button class="dropdown-item task-delete" id="taskDelete{{task.id}}">Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ</button></li>
                                    <li><button class="dropdown-item task-edit" id="taskEdit{{task.id}}">Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ</button></li>
                                </ul>
                            </div>
                            {% endif %}
                        {% endfor %}
                    </ul>
                    <div style="display: flex; align-items: center;" class="finished_tasks">
                        <span>â–¸</span>
                        <button class="btn btn-light btn-sm" type="button" data-bs-toggle="collapse" data-bs-target="#hiddenFolder{{folder.id}}" aria-expanded="false" aria-controls="hiddenFolder{{folder.id}}">
                            Ð’Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð½Ñ‹Ðµ Ð·Ð°Ð´Ð°Ñ‡Ð¸
                        </button>
                    </div>  
                    <div class="collapse" id="hiddenFolder{{folder.id}}">
                        <div class="card card-body" id="task-completed-list{{folder.id}}">
                            {% for task in folder.tasks %}
                                {% if task.is_completed %}
                                <div style="display: flex; align-items: center; justify-content: space-between;" class="task-item">
                                    <li id="task{{task.id}}"><input type="checkbox" id="taskCheckbox{{task.id}}" checked> {{ task.name }} </li>
                                    <button type="button" style="border: none;background: transparent;" data-bs-toggle="dropdown" aria-expanded="false"> : </button>
                                    <ul class="dropdown-menu">
                                        <li><button class="dropdown-item task-delete" id="taskDelete{{task.id}}">Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ</button></li>
                                        <li><button class="dropdown-item task-edit" id="taskEdit{{task.id}}">Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ</button></li>
                                      </ul>
                                </div>
                                {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                </div>
                
            </div>
            {%endfor%}
        </div>
    </div>
{% endblock %}